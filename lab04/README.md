## `Docker` Лабораторная работа 4

### Задание

Освоить методы создания образов с разными уровнями зависимостей.

Создать Dockerfile, который будет называться system. В него будут установлены все зависимости для сборки проекта. Как пример голая node нужной версии.

Создать Dockerfile Для сборки и назвать его build. В нем будет собираться проект, он должен использовать образ system. В build нельзя устанавливать никакие дополнительные зависимости, то есть apk add, apt install и прочее запрещены. В нём можно только скачивать зависимости и делать сборку проекта.

Создать Dockerfile, который будет запускать код, собранный в build. В нем должен быть только инструмент для запуска вашего проекта, как пример для node проекта - npm run start и пр. Если у вас python проект - объединять 2 и 3 шаги - можно. Если вы билдите проект на GO - тогда должен быть только бинарник для запуска.


### Чеклист

- [x] Создать Dockerfile, который будет называться system
- [x] Создать Dockerfile для сборки и назвать его build
- [x] Создать Dockerfile, который будет запускать код, собранный в build
- [x] Вся конфигурация выполняется через переменные окружения
- [x] Использовать базовые легковесные образы - alpine
- [x] Контейнер должен запускаться от непривилегированного пользователя
- [x] После установки всех нужных утилит, должен очищаться кеш


### Заметки по решению
- У приложения нет внешних настроек, только сугубо статические внутренние, поэтому в переменные окружения вынести нечего;
- `system`
  - Пакуется в `docker/Dockerfile.system`
  - Команда запуска
```shell
cd docker && docker build -t system:latest -f Dockerfile.system . 
```
- `build`
    - Пакуется в `backend/Dockerfile.build`
  - Команда запуска
```shell
cd backend && docker build -t build:latest -f Dockerfile.build . 
```
- `multistage`
  - Мультистадийная сборка работает в `docker/Dockerfile.multistage`
  - Запуска достаточно из compose
  - Не делался отдельный образ под контейнер-раннер, потому что достаточно голого `alpine`
